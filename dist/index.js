!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.PowerHelper=e():t.PowerHelper=e()}(this||("undefined"!=typeof window?window:global),(()=>(()=>{"use strict";var t={941:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.devError=void 0,e.devError=function(t,e){throw new Error("PowerHelper (X_X) => ".concat(t," -> ").concat(e))}},620:function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.PowerHelper=e.Once=e.JobQueues=e.Resource=e.Interaction=e.Exception=e.Breakpoint=e.CacheLite=e.PromiseOverlap=e.Reactive=e.WebSocketClient=e.QueryCollection=e.ElementListenerGroup=e.LocalStorage=e.StyleString=e.Debounce=e.Schedule=e.Loader=e.Ticker=e.Timer=e.Cache=e.Event=e.Pool=e.Hook=e.I18n=e.Log=e.element=e.detect=e.record=e.array=e.text=e.json=e.flow=e.pick=e.calc=void 0;var a=i(n(856)),s=i(n(86)),u=i(n(38)),c=i(n(70)),l=i(n(966)),f=i(n(81)),p=i(n(560)),h=i(n(888)),y=i(n(692)),d=n(553),v=n(500),m=n(846),b=n(640),g=n(257),w=n(684),_=n(635),x=n(440),S=n(547),O=n(853),k=n(135),j=n(364),P=n(298),T=n(667),E=n(358),M=n(960),C=n(982),A=n(255),L=n(69),D=n(715),N=n(485),B=n(280),I=n(792),z=n(533),U=n(910);e.calc=y,e.pick=u,e.flow=a,e.json=s,e.text=c,e.array=l,e.record=p,e.detect=f,e.element=h,e.Log=d.Log,e.I18n=v.I18n,e.Hook=m.Hook,e.Pool=U.Pool,e.Event=g.Event,e.Cache=w.Cache,e.Timer=_.Timer,e.Ticker=S.Ticker,e.Loader=x.Loader,e.Schedule=j.Schedule,e.Debounce=P.Debounce,e.StyleString=E.StyleString,e.LocalStorage=M.LocalStorage,e.ElementListenerGroup=A.ElementListenerGroup,e.QueryCollection=C.QueryCollection,e.WebSocketClient=L.WebSocketClient,e.Reactive=k.Reactive,e.PromiseOverlap=D.PromiseOverlap,e.CacheLite=N.CacheLite,e.Breakpoint=B.Breakpoint,e.Exception=I.Exception,e.Interaction=z.Interaction,e.Resource=O.Resource,e.JobQueues=T.JobQueues,e.Once=b.Once,e.PowerHelper={flow:e.flow,json:e.json,text:e.text,pick:e.pick,calc:e.calc,array:e.array,record:e.record,detect:e.detect,element:e.element,Log:e.Log,I18n:e.I18n,Hook:e.Hook,Pool:e.Pool,Once:e.Once,Event:e.Event,Cache:e.Cache,Timer:e.Timer,Ticker:e.Ticker,Loader:e.Loader,Schedule:e.Schedule,Debounce:e.Debounce,Reactive:e.Reactive,Resource:e.Resource,Exception:e.Exception,CacheLite:e.CacheLite,JobQueues:e.JobQueues,Breakpoint:e.Breakpoint,StyleString:e.StyleString,Interaction:e.Interaction,LocalStorage:e.LocalStorage,PromiseOverlap:e.PromiseOverlap,QueryCollection:e.QueryCollection,WebSocketClient:e.WebSocketClient,ElementListenerGroup:e.ElementListenerGroup},t.exports=e.PowerHelper,t.exports.PowerHelper=e.PowerHelper,e.default=e.PowerHelper},280:function(t,e){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Breakpoint=void 0;var r=function(){function t(t){this.params=t}return Object.defineProperty(t,"bootstrapBreakpoints",{get:function(){return{xs:{min:-1/0,max:575},sm:{min:576,max:767},md:{min:768,max:991},lg:{min:992,max:1119},xl:{min:1200,max:1/0}}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"vuetifyBreakpoints",{get:function(){return{xs:{min:-1/0,max:599},sm:{min:600,max:959},md:{min:960,max:1263},lg:{min:1264,max:1903},xl:{min:1904,max:1/0}}},enumerable:!1,configurable:!0}),t.prototype.matchs=function(t){void 0===t&&(t=this.params.defCheckValue());var e=[];for(var n in this.params.points){var r=n,o=this.params.points[r],i=o.min,a=o.max;t>=i&&t<=a&&e.push("".concat(r,"-only")),t>=i&&e.push("".concat(r,"-and-up")),t<=a&&e.push("".concat(r,"-and-down"))}return e},t.prototype.is=function(t){var e,r;void 0===t&&(t=this.params.defCheckValue());var o=this.matchs(t);try{for(var i=n(["xl","lg","md","sm","xs"]),a=i.next();!a.done;a=i.next()){var s=a.value;if(o.includes("".concat(s,"-only")))return s}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return"xs"},t.prototype.in=function(t,e){return void 0===e&&(e=this.params.defCheckValue()),this.matchs(e).includes(t)},t}();e.Breakpoint=r},485:function(t,e){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.CacheLite=void 0;var i=function(){function t(t){this.lastUpdate=Date.now(),this.keyMap=new Map,this.params=t}return t.prototype.gc=function(){var t,e,o=Date.now();if(o>this.lastUpdate+this.params.expTime){try{for(var i=n(this.keyMap.entries()),a=i.next();!a.done;a=i.next()){var s=r(a.value,2),u=s[0];s[1].time+this.params.expTime<o&&this.keyMap.delete(u)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}this.lastUpdate=o}},Object.defineProperty(t.prototype,"size",{get:function(){return this.keyMap.size},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this.keyMap.clear()},t.prototype.get=function(t){var e;return this.gc(),null===(e=this.keyMap.get(t))||void 0===e?void 0:e.data},t.prototype.set=function(t,e){var n,r,o={key:t,value:e},i=(null===(n=this.params.intercept)||void 0===n?void 0:n.set)?null===(r=this.params.intercept)||void 0===r?void 0:r.set(o):o;if(this.gc(),this.keyMap.set(i.key,{data:i.value,time:Date.now()}),this.params.maxSize&&this.keyMap.size>this.params.maxSize){var a=Array.from(this.keyMap.keys())[0];null!=a&&this.keyMap.delete(a)}return i.value},t.prototype.has=function(t){return this.gc(),this.keyMap.has(t)},t.prototype.remove=function(t){this.gc(),this.keyMap.has(t)&&this.keyMap.delete(t)},t.prototype.keys=function(){return this.gc(),o([],r(this.keyMap.keys()),!1)},t.prototype.values=function(){return this.gc(),o([],r(this.keyMap.values()),!1).map((function(t){return t.data}))},t}();e.CacheLite=i},684:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Cache=void 0;var u=n(257),c=function(){function t(t,e,n){this.createdAt=Date.now(),this.data=t,this.index=e,this.keepAlive=n}return t.prototype.isExpired=function(){return this.createdAt+this.keepAlive<Date.now()},t}(),l=function(t){function e(e){var n=t.call(this)||this;return n.event=new u.Event,n.index=0,n.items=new Map,n.key=e.key,n.pick=e.pick,n.maxSize=e.maxSize||1/0,n.keepAlive=null==e.keepAlive?1/0:e.keepAlive,n}return o(e,t),e.prototype.refresh=function(){var t,e;if(this.keepAlive!==1/0&&this.removeExpired(),this.maxSize!==1/0&&this.items.size>this.maxSize){var n=this.items.size-this.maxSize,r=a([],i(this.items.entries()),!1).sort((function(t,e){return t[1].index>e[1].index?1:-1})).slice(0,n);try{for(var o=s(r),u=o.next();!u.done;u=o.next()){var c=u.value;this.removeByKey(c[0])}}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}}},e.prototype.keys=function(){return Array.from(this.items.keys())},e.prototype.size=function(){return this.items.size},e.prototype.clear=function(){var t,e,n=this.keys();try{for(var r=s(n),o=r.next();!o.done;o=r.next()){var i=o.value;this.removeByKey(i)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},e.prototype.remove=function(t){var e=this.key(t);this.removeByKey(e)},e.prototype.removeExpired=function(){var t,e;try{for(var n=s(this.items),r=n.next();!r.done;r=n.next()){var o=i(r.value,2),a=o[0];o[1].isExpired()&&this.removeByKey(a)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.prototype.removeByKey=function(t){var e=this.items.get(t);e&&(this.emit("remove",{data:e.data}),this.items.delete(t))},e.prototype.set=function(t,e){var n=this.key(t);this.setByKey(n,e)},e.prototype.setByKey=function(t,e){this.removeByKey(t),this.index+=1,this.items.set(t,new c(e,this.index,this.keepAlive)),this.refresh()},e.prototype.get=function(t){var e=this;return this.refresh(),new Promise((function(n,r){var o=e.key(t),i=e.items.get(o);if(i&&!1===i.isExpired())return n(i.data);var a="".concat(o,"-onload");e.event.on(a,(function(t,e){e.off(),n(t)})),1===e.event.getChannelListenerSize(a)&&e.pick(t,{key:o}).then((function(t){e.event.emit(a,t),e.setByKey(o,t)})).catch(r)}))},e}(u.Event);e.Cache=l},298:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Debounce=void 0;var i=n(257),a=function(t){function e(e){var n=t.call(this)||this;return n.isDone=!1,n.values=[],n.params=e,n.duration=null==e.delay?-1:e.delay,n.totalDuration=null==e.totalDuration?-1:e.totalDuration,n.loop(),n}return o(e,t),e.prototype.loop=function(){var t=this;return this.isDone?null:0===this.duration||0===this.totalDuration||null!=this.params.maxValueLength&&this.params.maxValueLength<=this.values.length?this.trigger():(this.duration-=1,this.totalDuration-=1,void setTimeout((function(){return t.loop()}),1))},e.prototype.input=function(t){this.values.push(t),this.duration=null==this.params.delay?-1:this.params.delay},e.prototype.trigger=function(){!1===this.isDone&&(this.close(),this.emit("trigger",{values:this.values}))},e.prototype.close=function(){!1===this.isDone&&(this.isDone=!0,this.emit("close",{}))},e}(i.Event),s=function(t){function e(e){var n=t.call(this)||this;return n.unit=null,n.params=e,n}return o(e,t),e.prototype.input=function(t){var e=this;null==this.unit&&(this.unit=new a(this.params),this.unit.on("trigger",(function(t){var n=t.values;return e.emit("trigger",{values:n})})),this.unit.on("close",(function(){return e.close()}))),this.unit.input(t)},e.prototype.trigger=function(){this.unit?this.unit.trigger():this.emit("trigger",{values:[]})},e.prototype.close=function(){this.unit&&(this.unit.close(),this.unit=null)},e}(i.Event);e.Debounce=s},255:function(t,e,n){var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ElementListenerGroup=void 0;var o=n(856),i=function(){function t(t){this.elements=[],this.listeners=new Map,t&&this.elements.push(t)}return t.prototype.observe=function(t){var e,n;this.elements.push(t);try{for(var o=r(this.listeners.values()),i=o.next();!i.done;i=o.next()){var a=i.value;t.addEventListener(a.name,a.callback,a.options)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},t.prototype.off=function(t){var e,n,o=this.listeners.get(t);if(o){this.listeners.delete(t);try{for(var i=r(this.elements),a=i.next();!a.done;a=i.next())a.value.removeEventListener(o.name,o.callback)}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.add=function(t,e,n){var r=this,i=(0,o.createUuid)(),a={name:t,options:n,callback:e};return this.listeners.set(i,a),this.elements.forEach((function(t){return t.addEventListener(a.name,a.callback,n)})),{id:i,off:function(){return r.off(i)}}},t.prototype.clear=function(){var t,e;try{for(var n=r(this.listeners.keys()),o=n.next();!o.done;o=n.next()){var i=o.value;this.off(i)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t}();e.ElementListenerGroup=i},257:function(t,e){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Event=void 0;var r=function(){function t(t,e,n){this.id=Date.now().toString()+Math.floor(1e6*Math.random()),this.state={},this.manager=t,this.channel=e,this.callback=n}return t.prototype.invoke=function(t){var e=this;this.callback(t,{id:this.id,off:function(){return e.off()},state:this.state})},t.prototype.off=function(){this.manager.off(this.channel,this.id)},t}(),o=function(){function t(){this.listeners=new Map}return t.prototype.getChannelListenerSize=function(t){var e=this.listeners.get(t);return e?e.length:0},t.prototype.emit=function(t,e){var r,o,i,a,s=this.listeners.get(t);if(s)try{for(var u=n(s),c=u.next();!c.done;c=u.next())c.value.invoke(e)}catch(t){r={error:t}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}var l=this.listeners.get("*");if(l)try{for(var f=n(l),p=f.next();!p.done;p=f.next())p.value.invoke({data:e,channel:t})}catch(t){i={error:t}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}},t.prototype.off=function(t,e){var n=t,r=this.listeners.get(n);r&&this.listeners.set(n,r.filter((function(t){return t.id!==e})))},t.prototype.on=function(t,e){var n=t,o=new r(this,n,e);return!1===this.listeners.has(n)&&this.listeners.set(n,[]),this.listeners.get(n).push(o),o},t}();e.Event=o},792:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.Exception=void 0;var s=function(t){function e(e,n){var r=t.call(this)||this;return r.parent=null,r.options={defaultError:function(){return"Error!"},parseMessage:function(t){return t}},r.serviceName=e,n&&Object.assign(r.options,n),r}return o(e,t),Object.defineProperty(e,"basicMessageParser",{get:function(){return function(t){var e,n,r,o,i,a,s,u,c,l,f,p,h,y;if("string"==typeof t)return t;if("AxiosError"===t.name){if((null===(e=t.response)||void 0===e?void 0:e.data)&&"string"==typeof(null===(n=t.response)||void 0===n?void 0:n.data))return t.response.data;if((null===(o=null===(r=t.response)||void 0===r?void 0:r.data)||void 0===o?void 0:o.message)&&"string"==typeof(null===(a=null===(i=t.response)||void 0===i?void 0:i.data)||void 0===a?void 0:a.message))return null===(u=null===(s=t.response)||void 0===s?void 0:s.data)||void 0===u?void 0:u.message;if((null===(l=null===(c=t.response)||void 0===c?void 0:c.data)||void 0===l?void 0:l.error)&&"string"==typeof(null===(p=null===(f=t.response)||void 0===f?void 0:f.data)||void 0===p?void 0:p.error))return null===(y=null===(h=t.response)||void 0===h?void 0:h.data)||void 0===y?void 0:y.error}var d=t.message;return d&&"string"==typeof d?d:null}},enumerable:!1,configurable:!0}),e.prototype._setParent=function(t){this.parent=t},e.prototype._getParents=function(){return null==this.parent?[]:a([this.parent],i(this.parent._getParents()),!1)},Object.defineProperty(e.prototype,"fullName",{get:function(){return null==this.parent?this.serviceName:"".concat(this.parent.fullName,"/").concat(this.serviceName)},enumerable:!1,configurable:!0}),e.prototype.parseMessage=function(t){return this.options.parseMessage(t)||this.options.defaultError()},e.prototype.create=function(t){var e=this.parseMessage(t),n={error:t,message:e};return this._getParents().concat([this]).forEach((function(t){return t.emit("fail",n)})),new Error("".concat(this.fullName,": ").concat(e))},e.prototype.checkout=function(t){var n=new e(t,this.options);return n._setParent(this),n},e}(n(257).Event);e.Exception=s},846:function(t,e){var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Hook=void 0;var i=function(){function t(t,e,n){this.id=Date.now().toString()+Math.floor(1e6*Math.random()),this.state={},this.isAfter=!1,this.manager=t,this.channel=e,this.callback=n}return t.prototype.invoke=function(t){return n(this,void 0,void 0,(function(){var e=this;return r(this,(function(n){switch(n.label){case 0:return[4,this.callback(t,{id:this.id,off:function(){return e.off()},state:this.state})];case 1:return n.sent(),[2]}}))}))},t.prototype.off=function(){this.manager.detach(this.channel,this.id)},t}(),a=function(){function t(){this.listeners=new Map}return t.prototype.notify=function(t,e){return n(this,void 0,void 0,(function(){var n,i,a,s,u,c,l,f,p,h,y;return r(this,(function(r){switch(r.label){case 0:if(!(n=this.listeners.get(t)))return[3,15];r.label=1;case 1:r.trys.push([1,6,7,8]),i=o(n.filter((function(t){return!1===t.isAfter}))),a=i.next(),r.label=2;case 2:return a.done?[3,5]:[4,a.value.invoke(e)];case 3:r.sent(),r.label=4;case 4:return a=i.next(),[3,2];case 5:return[3,8];case 6:return s=r.sent(),f={error:s},[3,8];case 7:try{a&&!a.done&&(p=i.return)&&p.call(i)}finally{if(f)throw f.error}return[7];case 8:r.trys.push([8,13,14,15]),u=o(n.filter((function(t){return t.isAfter}))),c=u.next(),r.label=9;case 9:return c.done?[3,12]:[4,c.value.invoke(e)];case 10:r.sent(),r.label=11;case 11:return c=u.next(),[3,9];case 12:return[3,15];case 13:return l=r.sent(),h={error:l},[3,15];case 14:try{c&&!c.done&&(y=u.return)&&y.call(u)}finally{if(h)throw h.error}return[7];case 15:return[2]}}))}))},t.prototype.detach=function(t,e){var n=t,r=this.listeners.get(n);r&&this.listeners.set(n,r.filter((function(t){return t.id!==e})))},t.prototype.attach=function(t,e){var n=t,r=new i(this,n,e);return!1===this.listeners.has(n)&&this.listeners.set(n,[]),this.listeners.get(n).push(r),r},t.prototype.attachAfter=function(t,e){var n=this.attach(t,e);return n.isAfter=!0,n},t}();e.Hook=a},500:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.I18n=void 0;var s=n(257),u=n(70),c=function(t){function e(e){var n=t.call(this)||this;return n.params=e,n.nowLocale=e.def,n}return o(e,t),e.prototype.get=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=e;o="##"===o.slice(0,2)?o.slice(2).trim():this.params.locales[t][e]||e;var i=(0,u.replaceVar)({start:"{",end:"}",text:o,vars:n[0]||{}});return this.emit("get",{key:e,text:o,locale:t,output:i}),i},e.prototype.export=function(t){var e=this;return function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return e.get.apply(e,a([t,n],i(r),!1))}},e.prototype.t=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.get.apply(this,a([this.nowLocale,t],i(e),!1))},e.prototype.setLocale=function(t){this.nowLocale=t},e.prototype.getLocale=function(){return this.nowLocale},e.prototype.key=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return{get:function(r){return e.get.apply(e,a([r,t],i(n),!1))}}},e}(s.Event);e.I18n=c},533:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Interaction=void 0;var a=function(t){function e(e){var n=e.name,r=e.interceptorMessage,o=e.stepMaxSize,i=t.call(this)||this;return i.steps=[],i.stepMaxSize=100,i.name=n,i.interceptorMessage=r||function(t){return t},i.stepMaxSize=o||100,i}return o(e,t),Object.defineProperty(e.prototype,"fullName",{get:function(){return this.parent?"".concat(this.parent.fullName,"/").concat(this.name):this.name},enumerable:!1,configurable:!0}),e.prototype.pushStep=function(t){if(this.parent)this.parent.pushStep(t);else{this.steps.length>=this.stepMaxSize&&this.steps.shift();var e=i(i({},t),{message:this.interceptorMessage(t.message),createdAt:Date.now()});this.steps.push(e),this.emit("action",e)}},e.prototype.getFlowText=function(t){return void 0===t&&(t=2),this.steps.slice(-1*t).map((function(t){return t.message})).join("->")},e.prototype.each=function(t){this.steps.forEach(t)},e.prototype.step=function(t,e){this.pushStep({meta:e,type:"step",level:"info",message:t,checkoutAt:this.fullName})},e.prototype.fail=function(t,e){var n=e||t;return this.pushStep({meta:n,type:"fail",level:"danger",message:t,checkoutAt:this.fullName}),n instanceof Error?n:new Error(n)},e.prototype.wrong=function(t){this.pushStep({meta:t,type:"wrong",level:"danger",message:t,checkoutAt:this.fullName})},e.prototype.checkout=function(t){var n=new e({name:t,interceptorMessage:this.interceptorMessage});return n.parent=this,{step:n.step.bind(n),fail:n.fail.bind(n),wrong:n.wrong.bind(n),notify:n.notify.bind(n),checkout:n.checkout.bind(n)}},e.prototype.notify=function(t,e){this.pushStep({meta:e,type:"notify",level:t,message:e,checkoutAt:this.fullName})},e}(n(257).Event);e.Interaction=a},667:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.JobQueues=void 0;var i=function(t){function e(e){var n=t.call(this)||this;return n.jobs=[],n.closed=!1,n.runningCount=0,n.params=e,n}return o(e,t),Object.defineProperty(e.prototype,"size",{get:function(){return this.jobs.length+this.runningCount},enumerable:!1,configurable:!0}),e.prototype.run=function(){var t=this;if(this.closed)return null;if(this.params.concurrentExecutions&&this.runningCount>=this.params.concurrentExecutions)return null;var e=this.jobs.shift();e&&(this.runningCount+=1,e.handler().catch((function(n){t.emit("error",{name:(null==e?void 0:e.name)||"",error:n})})).finally((function(){t.less(),t.run()})))},e.prototype.less=function(){this.runningCount-=1,this.runningCount<=0&&(this.runningCount=0),0===this.size&&this.emit("allDone",{})},e.prototype.push=function(t,e){!1===this.closed&&(this.jobs.push({name:t,handler:e}),this.run())},e.prototype.unshift=function(t,e){!1===this.closed&&(this.jobs.unshift({name:t,handler:e}),this.run())},e.prototype.clear=function(){this.jobs=[]},e.prototype.close=function(){this.clear(),this.closed=!0},e}(n(257).Event);e.JobQueues=i},440:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Loader=void 0;var s=n(257),u=n(941),c=function(t){function e(e){void 0===e&&(e="no_name");var n=t.call(this)||this;return n.items=[],n.status={isDone:!1,isCalled:!1,isLoading:!1,complete:0,fail:null},n.name=e,n}return o(e,t),Object.defineProperty(e.prototype,"size",{get:function(){return this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"complete",{get:function(){return this.status.complete},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"done",{get:function(){return this.status.isDone},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fail",{get:function(){return this.status.fail},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"called",{get:function(){return this.status.isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loading",{get:function(){return this.status.isLoading},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this.items=[]},e.prototype.push=function(t,e){this.items.find((function(e){return e.name===t}))&&(0,u.devError)("push","Loader ".concat(t," push name ").concat(t," already exists.")),this.items.push({name:t,handler:e})},e.prototype.reset=function(){if(!1===this.status.isDone)throw new Error("Loader ".concat(this.name,' call "reset" must called start.'));return Object.assign(this.status,{isDone:!1,isCalled:!1,isLoading:!1,complete:0,fail:null}),this},e.prototype.start=function(t){var e=this;return this.status.isCalled&&(0,u.devError)("start","Loader ".concat(this.name," Already Called.")),this.status.isCalled=!0,this.status.isLoading=!0,this.emit("call",{}),new Promise((function(n,r){var o=e.items.map((function(n){var r=n.name,o=n.handler;return function(){return i(e,void 0,void 0,(function(){var e,n;return a(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,o(t)];case 1:return e=i.sent(),this.status.complete+=1,this.emit("complete",{name:r,result:e,loaderName:this.name}),[2,{name:r,result:e}];case 2:throw n=i.sent(),{isPowerHelperLoader:!0,loaderName:this.name,name:r,error:n};case 3:return[2]}}))}))}}));Promise.all(o.map((function(t){return t()}))).then((function(t){e.status.isDone=!0,e.status.isLoading=!1,e.emit("done",{}),n(t)})).catch((function(t){e.status.isDone=!0,e.status.isLoading=!1,e.status.fail=t,e.emit("fail",{error:t}),r(t)}))}))},e}(s.Event);e.Loader=c},960:function(t,e){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.LocalStorage=void 0;var r=function(){function t(t,e){this.interceptGet=null,this.interceptSet=null,this.options=e,this.storage="undefined"==typeof window?null:window.localStorage,this.namespaces=t,e&&(e.storageSystem&&(this.storage=e.storageSystem),e.intercept&&(e.intercept.get&&(this.interceptGet=e.intercept.get.bind(this)),e.intercept.set&&(this.interceptSet=e.intercept.set.bind(this))))}return t.prototype._genName=function(t){return"_power_".concat(this.namespaces,"/").concat(t.toString())},t.prototype.set=function(t,e){var n="function"==typeof e?e(this.get(t)):e;this.interceptSet&&(n=this.interceptSet(t,n)),this.storage.setItem(this._genName(t),JSON.stringify(n))},t.prototype.get=function(t){var e=null,n=this.options,r=!1,o=function(){return null};n&&n.defaultColumns&&n.defaultColumns[t]&&(o=n.defaultColumns[t]);var i=this.storage.getItem(this._genName(t));return null==i&&(i=o(),r=!0),e=r?i:null!=i?JSON.parse(i):null,this.interceptGet&&(e=this.interceptGet(t,e,{storage:this,isDefault:r,defaultValue:o})),e},t.prototype.clear=function(){var t,e,r="_power_".concat(this.namespaces,"/"),o=Object.keys(this.storage);try{for(var i=n(o),a=i.next();!a.done;a=i.next()){var s=a.value;s.length>=r.length&&s.slice(0,r.length)===r&&this.remove(s.slice(r.length))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.remove=function(t){this.storage.removeItem(this._genName(t))},t}();e.LocalStorage=r},553:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Log=void 0;var i=n(257),a={default:"",red:"[31m",blue:"[34m",cyan:"[36m",black:"[30m",white:"[37m",green:"[32m",yellow:"[33m"},s=function(t){function e(e,n){var r=t.call(this)||this;return r.step=0,r.isSilence=!1,r.defaultLogType="normal",r.name=e,n&&(null!=n.silence&&r.silence(n.silence),null!=n.defaultLogType&&(r.defaultLogType=n.defaultLogType)),r}return o(e,t),e.prototype.getNow=function(){return(new Date).toISOString().split(/T|\./).slice(0,2).join(" ")},e.prototype.toPrintString=function(t,e,n){return"[".concat(t,"][").concat(this.name,"][").concat(e,"] ").concat(this.step,": ").concat(n)},e.prototype.silence=function(t){void 0===t&&(t=!0),this.isSilence=t},e.prototype.print=function(t,e){void 0===e&&(e={}),this.step+=1;var n=this.getNow(),r=e.color||"default",o=e.logType||this.defaultLogType,i=this.toPrintString(n,o,t),s={time:n,name:this.name,step:this.step,data:t,color:r,message:i,logType:o,silence:this.isSilence};return this.emit("print",s),!1===this.isSilence&&("default"===r?console.log(i):"undefined"==typeof window?console.log("".concat(a[r]).concat(i,"[0m")):console.log("%c ".concat(i),"color: ".concat(r))),s},e}(i.Event);e.Log=s},640:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Once=void 0;var i=n(257),a=function(){function t(t){this.isDone=!1,this.isError=!1,this.event=new i.Event,this.response=null,this.params=t}return t.prototype.run=function(){return r(this,void 0,void 0,(function(){var t=this;return o(this,(function(e){return[2,new Promise((function(e,n){var r=function(){t.isError?n(t.response):e(t.response)};t.isDone?r():(t.event.on("onload",(function(t,e){e.off(),r()})),1===t.event.getChannelListenerSize("onload")&&t.params.handler().then((function(e){t.response=e})).catch((function(e){t.response=e,t.isError=!0})).finally((function(){t.isDone=!0,t.event.emit("onload",{})})))}))]}))}))},t.prototype.reset=function(){this.isDone=!1,this.isError=!1,this.response=null},t}();e.Once=a},910:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Pool=void 0;var i=n(684),a=n(982),s=function(){function t(t){var e=t.find,n=t.fetch,s=t.cache,u=t.collection,c=this;this.dataCollection=new a.QueryCollection({waitTime:(null==u?void 0:u.waitTime)||100,query:function(t){return r(c,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,n(t)];case 1:return[2,e.sent()]}}))}))}}),this.dataCache=new i.Cache({keepAlive:(null==s?void 0:s.keepAlive)||3e5,maxSize:(null==s?void 0:s.maxSize)||100,key:function(t){return JSON.stringify(t)},pick:function(t){return r(c,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,this.dataCollection.push(t)];case 1:return[2,n.sent().find((function(n){return e(n,t)}))]}}))}))}})}return t.prototype.pick=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){return[2,this.dataCache.get(t)]}))}))},t.prototype.list=function(t){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(n){switch(n.label){case 0:return[4,Promise.all(t.map((function(t){return e.dataCache.get(t)})))];case 1:return[2,n.sent()]}}))}))},t.prototype.remove=function(t){this.dataCache.remove(t)},t.prototype.clear=function(){this.dataCache.clear()},t}();e.Pool=s},715:function(t,e){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.PromiseOverlap=void 0;var r=function(){function t(t,e){void 0===e&&(e={}),this.processes=[],this.pick=t,this.options=e}return t.prototype.run=function(t){var e=this,r={data:null,closed:!1,reject:null,resolve:null,isError:!1},o=function(t,o){var i,a;if(r.data=t,r.closed=!0,r.isError=o,0===e.processes.filter((function(t){return!t.closed})).length){var s;s="first"===e.pick?e.processes[0]:e.processes[e.processes.length-1];try{for(var u=n(e.processes),c=u.next();!c.done;c=u.next()){var l=c.value;s.isError?l.reject(s.data):l.resolve(s.data)}}catch(t){i={error:t}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}e.processes=[]}};return this.processes.push(r),new Promise((function(n,i){r.reject=i,r.resolve=n,setTimeout((function(){t().then((function(t){return o(t,!1)})).catch((function(t){return o(t,!0)}))}),e.options.delay||10)}))},t}();e.PromiseOverlap=r},982:function(t,e){var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.QueryCollection=void 0;var o=function(){function t(t){this.timeout=null,this.collection=[],this.params=t}return t.prototype.push=function(t){var e=this;return new Promise((function(o,i){e.collection.push({data:t,resolve:o,reject:i}),null==e.timeout&&(e.timeout=setTimeout((function(){return n(e,void 0,void 0,(function(){var t,e,n;return r(this,(function(r){switch(r.label){case 0:t=this.collection.slice(),this.timeout=null,this.collection=[],r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.params.query(t.map((function(t){return t.data})))];case 2:return e=r.sent(),t.forEach((function(t){return t.resolve(e)})),[3,4];case 3:return n=r.sent(),t.forEach((function(t){return t.reject(n)})),[3,4];case 4:return[2]}}))}))}),e.params.waitTime))}))},t}();e.QueryCollection=o},135:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Reactive=void 0;var c=n(257),l=n(364),f=function(t){function e(e){var n=t.call(this)||this;return n.oldKey=null,n.schedule=new l.Schedule,n.installed=!1,n.nextTicks=[],n.params=e,n}return o(e,t),e.prototype.isActive=function(){return this.installed},e.prototype.close=function(){this.schedule.close()},e.prototype.nextTick=function(t){this.nextTicks.push(t)},e.prototype.from=function(t){return a(this,void 0,void 0,(function(){var e,n=this;return s(this,(function(r){switch(r.label){case 0:return this.oldKey=null,this.state=t,this.installed=!0,e=null!=this.params.schedule?this.params.schedule:100,[4,this.dispatch()];case 1:return r.sent(),!1===this.schedule.has("reactive")&&this.schedule.add("reactive",e,(function(){return a(n,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.dispatch()];case 1:return t.sent(),[2]}}))}))})),[2,this]}}))}))},e.prototype.dispatch=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,o;return s(this,(function(i){switch(i.label){case 0:return[4,this.params.observable(this.state)];case 1:return(t=i.sent())===this.oldKey?[3,3]:[4,this.trigger(t)];case 2:i.sent(),i.label=3;case 3:if(this.nextTicks.length>=1){try{for(e=u(this.nextTicks),n=e.next();!n.done;n=e.next())(0,n.value)(this.state)}catch(t){r={error:t}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(r)throw r.error}}this.nextTicks=[]}return[2]}}))}))},e.prototype.trigger=function(t){return a(this,void 0,void 0,(function(){var e,n=this;return s(this,(function(r){switch(r.label){case 0:return e={state:this.state,newKey:t,oldKey:this.oldKey},this.emit("actionBefore",e),[4,this.params.action(i(i({},e),{close:function(){return n.close()}}))];case 1:return r.sent(),this.emit("actionAfter",e),this.oldKey=t,[2]}}))}))},e}(c.Event);e.Reactive=f},853:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Resource=void 0;var a=n(257),s=n(70),u=n(358),c=function(t){function e(e){var n=t.call(this)||this;return n.objectUrls=[],n.params=e,n}return o(e,t),e.prototype.createObjectUrl=function(t){var e=URL.createObjectURL(t);return this.objectUrls.push(e),e},e.prototype.get=function(t){for(var e,n,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return this.url((null===(n=null===(e=this.params.items)||void 0===e?void 0:e[t])||void 0===n?void 0:n.call(e,r[0]))||"")},e.prototype.url=function(t){var e,n,r="",o=!1;if("string"==typeof t){var a=t.trim();try{for(var u=i(["http","file","data:","//"]),c=u.next();!c.done;c=u.next()){var l=c.value;if((0,s.headMatch)(a,l)){r=a;break}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}}else("undefined"!=typeof File&&t instanceof File||"undefined"!=typeof Blob&&t instanceof Blob||"undefined"!=typeof MediaSource&&t instanceof MediaSource)&&(r=this.createObjectUrl(t),o=!0);return""===r.trim()&&(r="string"==typeof t?this.params.def(t):""),this.emit("fetch",{url:r,source:t,isObjectUrl:o}),r},e.prototype.release=function(){this.objectUrls.forEach((function(t){return URL.revokeObjectURL(t)})),this.objectUrls=[]},e.prototype.backgroundStyle=function(t,e){void 0===e&&(e="basic");var n=new u.StyleString;return n.set("backgroundImage","url(".concat(this.url(t),")")),"cover"===e&&(n.set("backgroundSize","cover"),n.set("backgroundRepeat","no-repeat"),n.set("backgroundPosition","center")),n.join()},e}(a.Event);e.Resource=c},364:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Schedule=void 0;var a=n(257),s=n(941),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.int=setInterval((function(){return e.run()}),100),e.isStop=!1,e.lastTime=Date.now(),e.processes=[],e}return o(e,t),e.prototype.run=function(){var t,e,n=this;if(this.isStop)return null;var r=Date.now(),o=r-this.lastTime;this.lastTime=r;var a=function(t){if(t.runningTime)return"continue";t.now+=o,t.now>=t.sec&&(t.now=0,t.runningTime=Date.now(),t.executedCount+=1,t.handler().then((function(){t.runningTime=null})).catch((function(e){t.runningTime=null,n.emit("processFail",{processName:t.name,error:e})})))};try{for(var s=i(this.processes),u=s.next();!u.done;u=s.next())a(u.value)}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}},e.prototype.add=function(t,e,n){this.processes.find((function(e){return e.name===t}))&&(0,s.devError)("add","Name ".concat(t," already exists.")),this.processes.push({sec:e,now:0,name:t,executedCount:0,runningTime:null,handler:n})},e.prototype.has=function(t){return!!this.processes.find((function(e){return e.name===t}))},e.prototype.remove=function(t){null==this.processes.find((function(e){return e.name===t}))&&(0,s.devError)("add","Name ".concat(t," not found.")),this.processes=this.processes.filter((function(e){return e.name!==t}))},e.prototype.info=function(){return this.processes.map((function(t){return{name:t.name,runningTime:t.runningTime,executedCount:t.executedCount}}))},e.prototype.stop=function(){this.isStop=!0},e.prototype.play=function(){this.isStop=!1},e.prototype.close=function(){clearInterval(this.int)},e}(a.Event);e.Schedule=u},358:function(t,e){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.StyleString=void 0;var o=function(){function t(){this.styles={}}return t.prototype.set=function(t,e,n){var r=null==e?n:e;r&&(this.styles[t]=r)},t.prototype.get=function(t){return this.styles[t]},t.prototype.remove=function(t){this.styles[t]&&delete this.styles[t]},t.prototype.assign=function(t){var e,o;try{for(var i=n(Object.entries(this.styles)),a=i.next();!a.done;a=i.next()){var s=r(a.value,2),u=s[0],c=s[1];t.style[u]=c}}catch(t){e={error:t}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}}},t.prototype.join=function(t){var e,o;void 0===t&&(t=";");var i,a=[];try{for(var s=n(Object.entries(this.styles)),u=s.next();!u.done;u=s.next()){var c=r(u.value,2),l=c[0],f=c[1];a.push("".concat((i=l,i.replace(/[A-Z]/g,(function(t){return"-".concat(t.toLowerCase())}))),":").concat(f))}}catch(t){e={error:t}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(e)throw e.error}}return a.join(t)},t}();e.StyleString=o},547:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Ticker=void 0;var i=function(t){function e(e,n){var r=t.call(this)||this;return r.isStop=!1,r.delta=0,r.previousTime=Date.now(),r.int=setInterval((function(){return r.run()}),e),n&&!1===n.autoPlay&&r.stop(),r}return o(e,t),e.prototype.run=function(){if(!1===this.isStop){var t=Date.now();this.delta+=1,this.emit("next",{delta:this.delta,timeGap:t-this.previousTime}),this.previousTime=t}},e.prototype.stop=function(){this.isStop=!0},e.prototype.play=function(){this.isStop=!1,this.previousTime=Date.now()},e.prototype.close=function(){clearInterval(this.int)},e}(n(257).Event);e.Ticker=i},635:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Timer=void 0;var i=function(t){function e(){var e=t.call(this,1,{autoPlay:!1})||this;return e.nowTime=0,e.minTime=0,e.maxTime=999999999999,e.positive=!0,e.on("next",(function(t){var n=t.timeGap;e.positive?e.nowTime+=n:e.nowTime-=n,e.nowTime<=e.minTime&&(e.nowTime=e.minTime),e.nowTime>=e.maxTime&&(e.nowTime=e.maxTime)})),e}return o(e,t),e.prototype.setPositive=function(t){return this.positive=t,this},e.prototype.setMinTime=function(t){this.minTime=t},e.prototype.setMaxTime=function(t){this.maxTime=t},e.prototype.getTime=function(){return this.nowTime},e.prototype.setTime=function(t){return this.nowTime=t,this},e.prototype.addTime=function(t){return this.nowTime+=t,this},e.prototype.subtractTime=function(t){return this.nowTime-=t,this},e.prototype.getHours=function(){return this.nowTime/1e3/60/60},e.prototype.getMinutes=function(){return this.nowTime/1e3/60%60},e.prototype.getSeconds=function(){return this.nowTime/1e3%60},e.prototype.getMicroseconds=function(){return this.nowTime%1e3},e.prototype.getTimeString=function(t){void 0===t&&(t="hh:mm:ss.ff");var e=Math.floor(this.getHours()).toString().padStart(2,"0"),n=Math.floor(this.getMinutes()).toString().padStart(2,"0"),r=Math.floor(this.getSeconds()).toString().padStart(2,"0"),o=Math.floor(this.getMicroseconds()/10).toString().padStart(2,"0");return t.replace("hh",e).replace("mm",n).replace("ss",r).replace("ff",o)},e}(n(547).Ticker);e.Timer=i},69:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.WebSocketClient=void 0;var s=function(t){function e(e){var n=t.call(this)||this;return n.isManuallyClosed=!1,n.params=e,n}return o(e,t),e.prototype.fail=function(t,e){this.emit("$error",{from:t,error:e})},Object.defineProperty(e.prototype,"connected",{get:function(){return!!this._websocket},enumerable:!1,configurable:!0}),e.prototype.createWebsocket=function(t){var e=this;this.connected&&console.warn("Websocket ".concat(t," already connected."));var n=!1,r=this.params.system?this.params.system:WebSocket;return new Promise((function(o,s){e._websocket=new r(t,e.params.protocol),e._websocket.onopen=function(){n=!0,e.emit("$open",{}),o(null)},e._websocket.onerror=function(t){!1===n?s(t):e.fail("unknown",t)},e._websocket.onmessage=function(t){return i(e,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.params.onMessage(t)];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),this.fail("message",e),[3,3];case 3:return[2]}}))}))},e._websocket.onclose=function(){var t={isManuallyClosed:e.isManuallyClosed};e._websocket=null,e.emit("$close",t),e.isManuallyClosed=!1}}))},e.prototype.getStatus=function(){return!1===this.connected?"wait":0===this._websocket.readyState?"connecting":1===this._websocket.readyState?"open":2===this._websocket.readyState?"closeing":3===this._websocket.readyState?"closed":void 0},e.prototype.send=function(t,e){return i(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.params.sendHandler(t,e)];case 1:return n=o.sent(),this.connected?this._websocket.send(n):console.warn("Socket not connected, from send ".concat(t,".")),[3,3];case 2:return r=o.sent(),this.fail("send",r),[3,3];case 3:return[2]}}))}))},e.prototype.connect=function(){return i(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return[4,this.params.url()];case 1:return t=e.sent(),[4,this.createWebsocket(t)];case 2:return[2,e.sent()]}}))}))},e.prototype.disconnect=function(){this.connected?(this.isManuallyClosed=!0,this._websocket.close()):console.warn("Socket not connected, from disconnect.")},e}(n(257).Event);e.WebSocketClient=s},966:function(t,e){var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.check=e.asyncMap=e.unique=e.randomPicks=e.randomPick=e.groups=void 0,e.groups=function(t,e){for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n},e.randomPick=function(t){return t[Math.floor(Math.random()*t.length)]},e.randomPicks=function(t,n){if(n.length<=t)return n.slice();for(var r=[],o=100*n.length;o>0;){o-=1;var i=(0,e.randomPick)(n);if(!1===r.includes(i)&&r.push(i),r.length>=t)break}return r},e.unique=function(t){return i([],o(new Set(t)),!1)},e.asyncMap=function(t,e){return n(void 0,void 0,void 0,(function(){var n,o,i,s,u,c,l,f;return r(this,(function(r){switch(r.label){case 0:n=[],r.label=1;case 1:r.trys.push([1,6,7,8]),o=a(t),i=o.next(),r.label=2;case 2:return i.done?[3,5]:(s=i.value,[4,e(s)]);case 3:u=r.sent(),n.push(u),r.label=4;case 4:return i=o.next(),[3,2];case 5:return[3,8];case 6:return c=r.sent(),l={error:c},[3,8];case 7:try{i&&!i.done&&(f=o.return)&&f.call(o)}finally{if(l)throw l.error}return[7];case 8:return[2,n]}}))}))},e.check=function(t,e){return t.includes(e)?t.filter((function(t){return t!==e})):i(i([],o(t),!1),[e],!1)}},692:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toMs=void 0,e.toMs=function(t,e){var n=0;return"s"===t&&(n=1e3*e),"m"===t&&(n=6e4*e),"h"===t&&(n=36e5*e),"d"===t&&(n=864e5*e),"y"===t&&(n=315576e5*e),Math.floor(n)}},81:function(t,e){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.inSafari=e.inAndroid=e.inIOS=e.inMobile=e.inAppBrowser=void 0;var r=function(){return"undefined"==typeof window?null:window.navigator};e.inAppBrowser=function(){var t,e,o=r();if(null==o)return!1;var i=o.userAgent.toLowerCase();try{for(var a=n(["line/","instagram","fbios","fb_iab","fban","fbav","micromessenger"]),s=a.next();!s.done;s=a.next()){var u=s.value;if(i.includes(u))return!0}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return!1},e.inMobile=function(){return(0,e.inIOS)()||(0,e.inAndroid)()},e.inIOS=function(){var t=r();return null!=t&&/iPad|iPhone|iPod/.test(t.userAgent)},e.inAndroid=function(){var t=r();return null!=t&&t.userAgent.toLowerCase().indexOf("android")>-1},e.inSafari=function(){var t=r();if(null==t)return!1;var e=t.userAgent,n=!!e.match(/iP(ad|od|hone)/i),o=!!e.match(/Safari/i),i=!e.match(/Chrome|CriOS|OPiOS|mercury|FxiOS|Firefox/i);return n?!!e.match(/WebKit/i)&&o&&i:"undefined"!=typeof window&&void 0!==window.safari||o&&i}},888:function(t,e){var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.importCss=e.createAndAppend=e.importScript=void 0,e.importScript=function(t,e){return new Promise((function(r,o){var i,a,s=window.document,u=s.createElement("script"),c=Array.from(window.document.getElementsByTagName("script"));try{for(var l=n(c),f=l.next();!f.done;f=l.next())if(f.value.src===t)return r(null)}catch(t){i={error:t}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}u.src=t,(null==e?void 0:e.appendBefore)&&e.appendBefore(u),u.onload=r,u.onerror=o,s.body.appendChild(u)}))},e.createAndAppend=function(t,e,n){var r=window.document.createElement(t);return e(r),n?n.appendChild(r):window.document.body.appendChild(r),r},e.importCss=function(t,e){return new Promise((function(r,o){var i,a,s=window.document,u=s.createElement("link"),c=Array.from(window.document.getElementsByTagName("link"));try{for(var l=n(c),f=l.next();!f.done;f=l.next())if(f.value.href===t)return r(null)}catch(t){i={error:t}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}u.rel="stylesheet",u.href=t,(null==e?void 0:e.appendBefore)&&e.appendBefore(u),u.onload=r,u.onerror=o,s.body.appendChild(u)}))}},856:function(t,e){var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.asyncWhile=e.retry=e.createWithTsUuid=e.createUuid=e.randomInt=e.sleep=e.run=void 0,e.run=function(t){return t()},e.sleep=function(t){return new Promise((function(e){setTimeout((function(){return e(null)}),t)}))},e.randomInt=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},e.createUuid=function(){if("undefined"!=typeof crypto&&crypto.randomUUID)return crypto.randomUUID();var t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))},e.createWithTsUuid=function(){return"".concat(Date.now(),"-").concat((0,e.createUuid)())},e.retry=function(t){return n(void 0,void 0,void 0,(function(){var n,o,i,a;return r(this,(function(r){switch(r.label){case 0:n=0,o=null==t.max?1:t.max,i=[],r.label=1;case 1:if(!(o>0))return[3,8];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,t.action(n)];case 3:return[2,r.sent()];case 4:return a=r.sent(),t.onFail&&t.onFail(n,a),i.push({count:n,error:a}),[3,5];case 5:return n+=1,o-=1,t.interval?[4,(0,e.sleep)(t.interval)]:[3,7];case 6:r.sent(),r.label=7;case 7:return[3,1];case 8:throw i}}))}))},e.asyncWhile=function(t){return n(void 0,void 0,void 0,(function(){var e,n;return r(this,(function(r){switch(r.label){case 0:e=!1,n={count:0,doBreak:function(){e=!0}},r.label=1;case 1:return[4,t(n)];case 2:return r.sent(),e?[3,3]:(n.count+=1,[3,1]);case 3:return[2]}}))}))}},86:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.nonStrictJSONStringify=e.nonStrictJSONParse=e.jpjs=void 0,e.jpjs=function(t){return JSON.parse(JSON.stringify(t))},e.nonStrictJSONParse=function(t){try{return"string"==typeof t?JSON.parse(t):t}catch(t){return{}}},e.nonStrictJSONStringify=function(t){try{return JSON.stringify(t)}catch(t){return"{}"}}},38:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.vars=e.peel=e.getType=e.ifEmpty=e.ifBad=void 0,e.ifBad=function(t,n){var r=(0,e.getType)(t);return["empty","NaN","error"].includes(r)?n:t},e.ifEmpty=function(t,e){return null!=t?t:e},e.getType=function(t){var e=typeof t;return null==t?"empty":Array.isArray(t)?"array":"number"===e&&isNaN(t)?"NaN":t instanceof RegExp?"regexp":t instanceof Promise?"promise":"undefined"!=typeof Buffer&&Buffer.isBuffer(t)?"buffer":t instanceof Error?"error":e},e.peel=function(t,n){for(var r=n.split(/[.[\]'"]/g).filter((function(t){return""!==t.trim()})),o=t;;){if(0===r.length)return o;if("object"!==(0,e.getType)(o))return null;var i=r.shift();i&&(o=o[i])}},e.vars=function(t){for(var e=t.start,n=t.end,r=t.text,o=!1,i=[],a="",s=e[0],u=n[0],c=0;c<r.length;c++){var l=r[c];if(o){if(l===u&&r.slice(c,c+n.length)===n){c+=n.length-1,i.push(a),a="",o=!1;continue}a+=l}else if(l===s&&(o=r.slice(c,c+e.length)===e)){c+=e.length-1;continue}}return i}},560:function(t,e,n){var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.omit=e.createStrictObject=e.setMapValue=void 0;var o=n(86),i=n(38);e.setMapValue=function(t,e,n){var r=function(t,e,a){void 0===a&&(a="");var s={},u=null==t?{}:(0,o.jpjs)(t),c=null==e?{}:(0,o.jpjs)(e);for(var l in u)"object"!==(0,i.getType)(u[l])||!1!==(!!n&&!!n.directReplacePeels&&n.directReplacePeels.includes("".concat(a).concat(l)))?null==c[l]?s[l]=u[l]:s[l]=c[l]:s[l]=r(u[l],c[l],"".concat(a).concat(l,"."));return s};return r(t,e)},e.createStrictObject=function(t){var e={},n=function(t,e){return new Error("Strict Object Fail - ".concat(t,": ").concat(e,"!"))};for(var o in t){var a=r(t[o],4),s=a[0],u=a[1],c=a[2],l=a[3],f=(0,i.getType)(c),p=c;if("empty"===f){if(u)throw n(o,"is required")}else{if(s===String){if("string"!==f)throw n(o,"not a string");if(u&&""===p.trim())throw n(o,"no content")}if(s===Number){if("number"!==f&&"string"!==f)throw n(o,"not a number");if("string"===f&&(p=Number(p.trim())),isNaN(p))throw n(o,"is NaN")}if(s===Boolean){if("string"===f){if("true"!==(p=p.trim())&&"false"!==p)throw n(o,"not a boolean");p="true"===p}if(!0!==p&&!1!==p)throw n(o,"output value not a true or false")}}e[o]="empty"===f?l:p}return Object.freeze(e)},e.omit=function(t,e){var n={};for(var r in t)!1===e.includes(r)&&(n[r]=t[r]);return n}},70:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.format=e.replaceVar=e.byteLength=e.lastMatch=e.headMatch=void 0,e.headMatch=function(t,e){return t.slice(0,e.length)===e},e.lastMatch=function(t,e){return t.slice(-1*e.length)===e},e.byteLength=function(t){for(var e=t.length,n=t.length-1;n>=0;n--){var r=t.charCodeAt(n);r>127&&r<=2047?e++:r>2047&&r<=65535&&(e+=2),r>=56320&&r<=57343&&n--}return e},e.replaceVar=function(t){for(var e,n=t.start,r=t.end,o=t.text,i=t.vars,a=t.dafaultVar,s=!1,u="",c="",l=n[0],f=r[0],p=0;p<o.length;p++){var h=o[p];if(s){if(h===f&&o.slice(p,p+r.length)===r){p+=r.length-1;var y=i?null===(e=i[c.trim()])||void 0===e?void 0:e.toString():null;y?u+=y:a&&(u+=a),c="",s=!1;continue}c+=h}else{if(h===l&&(s=o.slice(p,p+n.length)===n)){p+=n.length-1;continue}u+=o[p]}}return s?u+n+c:u},e.format=function(t,e,n){void 0===n&&(n="-");for(var r=0,o="",i=0;i<t.length;i++)"v"===t[i]?(o+=null==e[r]?n:e[r],r+=1):o+=t[i];return o}}},e={};return function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}(620)})()));